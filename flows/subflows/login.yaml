appId: au.com.carnextdoor.staging.app
name: Login
tags:
  - sanity
env:
  PASSWORD: 12345678
onFlowStart:
  - runScript: ../../javascripts/test-setup-api.js
  - evalScript: ${console.log(output.testUser)}
  - runScript: ../../javascripts/test-user-create.js

---
- launchApp: au.com.carnextdoor.staging.app
- assertVisible: "Log in to Uber Carshare"
- tapOn: "Email address"
- inputText: ${output.testUser.email}
- tapOn: "Password"
- inputText: ${PASSWORD}
- tapOn: Log in
# First time login of a user on a device will be shown the verification code screen
- runFlow:
    when:
      visible: "Is it really you?"
    file: mobile_verification.yaml
- assertNotVisible: "Log in to Uber Carshare"
